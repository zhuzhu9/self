# RAM|ROM|FLASH

[TOC]

![img](图片/RAM|ROM|FLASH/20181130200020695.png)

# RAM

## 一、简介

RAM：随机存取存储器（英语：Random Access Memory）也叫主存，是与CPU直接交换数据的内部存储器。

它可以随时读写（刷新时除外），而且速度很快，通常作为操作系统或其他正在运行中的程序的临时数据存储介质。

RAM工作时可以随时从任何一个指定的地址写入（存入）或读出（取出）信息。

RAM在计算机和数字系统中用来暂时存储程序、数据和中间结果，**一旦断电所存储的数据将随之丢失**。

## 二、特点

### 1、随机存取

所谓“随机存取”，指的是当存储器中的数据被读取或写入时，所需要的时间与这段信息所在的位置或所写入的位置无关。相对的，读取或写入顺序访问（Sequential Access）存储设备中的信息时，其所需要的时间与位置就会有关系。它主要用来存放操作系统、各种应用程序、数据等。

当RAM处于正常工作时，可以从RAM中读出数据，也可以往RAM中写入数据。与ROM相比较，RAM的优点是读/写方便、使用灵活，特别适用于经常快速更换数据的场合。

### 易失性

当电源关闭时，RAM不能保留数据。如果需要保存数据，就必须把它们写入一个长期的存储设备中（例如硬盘）。 

RAM的工作特点是通电后，随时可在任意位置单元存取数据信息，断电后内部信息也随之消失。 

### 访问速度

现代的随机存取存储器几乎是所有访问设备中写入和读取速度最快的，存取延迟和其他涉及机械运作的存储设备相比，也显得微不足道。

### 需要刷新（再生）

现代的随机存取存储器依赖电容器存储数据。电容器充满电后代表1（[二进制](https://baike.baidu.com/item/二进制)），未充电的代表0。由于电容器或多或少有漏电的情形，若不作特别处理，数据会渐渐随时间流失。刷新是指定期读取电容器的状态，然后按照原来的状态重新为电容器充电，弥补流失了的[电荷](https://baike.baidu.com/item/电荷)。需要刷新正好解释了随机存取存储器的易失性。

## 三、分类

根据存储单元的工作原理不同， RAM分为静态RAM和动态RAM。

### 1、静态随机存储器（SRAM）

静态存储单元是在静态触发器的基础上附加门控管而构成的。

因此，它是靠触发器的自保功能存储数据的。

SRAM存放的信息在不停电的情况下能长时间保留，状态稳定，不需外加刷新电路，从而简化了外部电路设计。

但由于SRAM的基本存储电路中所含晶体管较多，故集成度较低，且功耗较大。

SRAM特点如下：
●存储原理：由触发器存储数据。 [8] 
●单元结构：六管NMOS或OS构成。 [8] 
●优点：速度快、使用简单、不需刷新、静态功耗极低；常用作Cache。 [8] 
●缺点：元件数多、集成度低、运行功耗大。 [8] 
●常用的SRAM集成芯片：6116（2K×8位），6264（8K×8位），62256（32K×8位），2114（1K×4位）。

### 2、动态随机存储器（DRAM）

DRAM利用电容存储电荷的原理保存信息，电路简单，集成度高。

由于任何电容都存在漏电，因此，当电容存储有电荷时，过一段时间由于电容放电会导致电荷流失，使保存信息丢失。

解决的办法是每隔一定时间（一般为2ms）须对DRAM进行读出和再写入，使原处于逻辑电平“l”的电容上所泄放的电荷又得到补充，原处于电平“0”的电容仍保持“0”，这个过程叫DRAM的刷新。

DRAM的刷新操作不同于存储器读/写操作，主要表现在以下几点：
（1）刷新地址由刷新地址计数器产生，不是由地址总线提供。 
（2）DRAM基本存储电路可按行同时刷新，所以刷新只需要行地址，不需要列地址。 
（3）刷新操作时存储器芯片的数据线呈高阻状态，即片内数据线与外部数据线完全隔离。 

DRAM特点如下：
●存储原理：利用MOS管栅极电容可以存储电荷的原理，需刷新（早期：三管基本单元；之后：单管基本单元）。
●刷新（再生）：为及时补充漏掉的电荷以避免存储的信息丢失，必须定时给栅极电容补充电荷的操作。
●刷新时间：定期进行刷新操作的时间。该时间必须小于栅极电容自然保持信息的时间（小于2ms）。 
●优点： 集成度远高于SRAM、功耗低，价格也低。 
●缺点：因需刷新而使外围电路复杂；刷新也使存取速度较SRAM慢，所以在计算机中，DRAM常用于作主存储器。

#### 分类

DRAM分为很多种，常见的主要有FPRAM/FastPage、EDORAM、SDRAM、DDR RAM、RDRAM、SGRAM以及WRAM等。

DDR RAM（Date-Rate RAM）也称作DDR  SDRAM，这种改进型的RAM和SDRAM是基本一样的，不同之处在于它可以在一个时钟读写两次数据，这样就使得数据传输速度加倍了。DDR1 /DDR2 /DDR3等都属 DDR RAM

这是目前电脑中用得最多的内存，而且它有着成本优势，事实上击败了Intel的另外一种内存标准－Rambus DRAM。在很多高端的显卡上，也配备了高速DDR RAM来提高带宽，这可以大幅度提高3D加速卡的像素渲染能力。

### 3、对比

DRAM与SRAM相比具有集成度高、功耗低、价格便宜等优点，所以在大容量存储器中普遍采用。DRAM的缺点是需要刷新逻辑电路，且刷新操作时不能进行正常读，写操作。

存储器的种类很多，按其用途可分为主存储器和辅助存储器，主存储器又称**内存储器**（简称内存），辅助存储器又称**外存储器**（简称外存）。

**外存**通常是磁性介质或光盘，像硬盘，软盘，磁带，CD等，能长期保存信息，并且不依赖于电来保存信息，但是由机械部件带动，速度与CPU相比就显得慢的多。

**内存**指的就是主板上的存储部件，是CPU直接与之沟通，并用其存储数据的部件，存放当前正在使用（即执行中）的数据和程序，它的物理实质就是一组或多组具备数据输入输出和数据存储功能的集成电路，内存只用于暂时存放程序和数据，一旦关闭电源或发生断电，其中的程序和数据就会丢失。

# ROM

## 一、简介

ROM：只读存储器（Read-Only Memory）以非破坏性读出方式工作，只能读出无法写入信息。

信息一旦写入后就固定下来，即使切断电源，信息也不会丢失，所以又称为固定存储器。

## 二、特点

只读存储器的特点是只能读出而不能写入信息，通常在电脑主板的ROM里面固化一个基本输入/输出系统，称为[BIOS](https://baike.baidu.com/item/BIOS/91424)（基本输入输出系统）。

其主要作用是完成对系统的加电自检、系统中各功能模块的初始化、系统的基本输入/输出的驱动程序及引导操作系统。

## 三、种类

从其制造工艺和功能上分，ROM有五种类型
1.掩膜编程的只读存储器MROM（Mask-programmedROM）
2.可编程的只读存储器PROM（Programmable ROM）
3.可擦除可编程的只读存储器EPROM（Erasable Programmable ROM）
4.可电擦除可编程的只读存储器  EEPROM（Elecrically Erasable Programmable ROM）
5.快擦除读写存储器（Flash Memory）。

### 掩膜编程的只读存储器

MROM的主要优点是存储内容固定，掉电后信息仍然存在,可靠性高。缺点是信息一次写入（制造）后就不能修改，很不灵活且生产周期长，用户与生产厂家之间的依赖性大。

### 可编程只读存储器

允许用户通过专用的设备（编程器）一次性写入自己所需要的信息，其一般可编程一次，PROM存储器出厂时各个存储单元皆为1，或皆为0。用户使用时，再使用编程的方法使PROM存储所需要的数据。

只能进行一次性改写，一旦编程完毕，其内容便是永久性的。由于可靠性差，又是一次性编程，较少使用。PROM中的程序和数据是由用户利用专用设备自行写入，一经写入无法更改，永久保存。PROM具有一定的灵活性，适合小批量生产，常用于工业控制机或电器中。

### 可编程可擦除只读存储器

是一种以读为主的可写可读的存储器。

是一种便于用户根据需要来写入，并能把已写入的内容擦去后再改写的ROM。

但是EPROM采用MOS管，速度较慢。

### 电可擦除可编程只读存储器

是一种随时可写入而无须擦除原先内容的存储器，其**写操作比读操作时间要长**得多，EEPROM把不易丢失数据和修改灵活的优点组合起来，修改时只需使用普通的控制、地址和数据总线。

EEPROM运作原理类似[EPROM](https://baike.baidu.com/item/EPROM)，但抹除的方式是使用高电场来完成。 EEPROM比 EPROM贵，集成度低，成本较高

一般用于保存系统设置的参数、IC卡上存储信息、电视机或空调中的控制器。但由于其可以在线修改，所以可靠性不如 EPROM。

### 快擦除读写存储器

既有EEPROM的特点，又有RAM的特点，是一种全新的存储结构，俗称快闪存储器。

与 EEPROM一样，快闪存储器使用电可擦技术，整个快闪存储器可以在一秒钟至几秒内被擦除，速度比 EPROM快得多。

能擦除存储器中的某些块，而不是整块芯片。然而快闪存储器不提供字节级的擦除，与 EPROM一样，快闪存储器每位只使用一个晶体管，因此能获得与 EPROM一样的高密度(与  EEPROM相比较)。

“闪存”芯片采用单一电源（3V或者5V）供电，擦除和编程所需的特殊电压由芯片内部产生，因此可以在线系统擦除与编程。

“闪存”也是典型的非易失性存储器，在正常使用情况下，其浮置栅中所存电子可保存100年而不丢失。 

目前，闪存已广泛用于制作各种移动存储器，如U盘及数码相机/摄像机所用的存储卡等。

### 一次编程只读内存

写入原理同EPROM，但是为了节省成本，编程写入之后就不再抹除

# FLASH

## 一、简介

flash是存储芯片的一种，通过特定的程序可以修改里面的数据。

FLASH在电子以及半导体领域内往往表示Flash Memory的意思，即平时所说的“闪存”，全名叫**Flash EEPROM Memory**（也就是ROM/EEPROM的一种）。

结合了ROM和RAM的长处，不仅具备电子可擦除可编程（EEPROM）的性能，还不会断电丢失数据同时可以快速读取数据（NVRAM的优势）

过去的20年里，嵌入式系统一直使用ROM（EPROM）作为它们的存储设备，然而近年来Flash全面代替了ROM（EPROM）在嵌入式系统中的地位，用作存储Bootloader以及操作系统或者程序代码或者直接当硬盘使用

## 二、分类

主要有NOR Flash和NAND Flash两种。

### 1、**NAND Flash**

NAND是目前闪存中最主要的产品，具备非易失，高密度，低成本的优势。

在NAND闪存中，数据是以位（bit）的方式保存在Memory  Cell中，一个Cell存储一个bit，这些Cell或8个或16个为单位，连成bit  line，而这些line组合起来会构成Page，而NAND闪存就是以页为单位读写数据，以块为单位擦除数据

故其写入和擦除速度虽比DRAM大约慢3-4个数量级，却也比传统的机械硬盘快3个数量级，被广泛用于 eMMC/EMCP，U盘，SSD等市场。

### 2、**NOR Flash**

#### 简介

NOR Flash 的特点是**芯片内执行**（XIP，Execute In  Place），即应用程序不必再把代码读到系统RAM中，而是可以直接在Flash闪存内运行。

NOR  的传输效率很高，读取速度也比NAND快很多，在1~4MB的小容量时具有很高的成本效益，然而其擦除是以64-128KB的块为单位进行的，执行一个写入/擦除操作的时间为5s，而NAND器件的擦除则是以8-32KB的块为单位进行，执行相同的操作最多只需要4ms，故其很低的写入和擦除速度大大影响到它的性能。

此外，NOR的单元尺寸几乎是NAND flash的两倍，故在成本上也不具备优势，这使得NOR的使用范围受到了更大的限制，不少曾属于NOR的市场也慢慢被其他存储器所夺取，但NOR  flash厂商也并没有坐以待毙，而是积极开拓汽车电子等物联网市场。

NOR Flash的读取和我们常见的SDRAM的读取是一样，用户可以直接运行装载在NOR FLASH里面的代码，这样可以减少SRAM的容量从而节约了成本。

#### 分类

按照硬件类型，可以分为

*Bare NAND chips*：裸片。单独的Nand Flash芯片。

*SmartMediaCards*：裸片+一层薄塑料。常用于数码相机和MP3播放器中。之所以称smart，是由于其软件smart，而不是硬件本身有啥smart之处。

DiskOnChip：裸片+glue logic。glue logic=硬件ECC产生器+用于静态的nand 芯片控制的寄存器+直接访问一小片地址窗口，那块地址中包含了引导代码的stub桩，其可以从Nand Flash中拷贝真正的引导代码。

#### SLC和MLC	

#####  SLC（Single Level Cell）

单个存储单元，只存储一位数据，表示1或0。

就是上面介绍的，对于数据的表示，单个存储单元中内部所存储电荷的电压，和某个特定的阈值电压Vth，相比，如果大于此Vth值，就是表示1，反之，小于Vth，就表示0。

对于Nand Flash的数据的写入1，就是控制External Gate去充电，使得存储的电荷够多，超过阈值Vth，就表示1了。而对于写入0，就是将其放电，电荷减少到小于Vth，就表示0了。

关于为何Nand  Flash不能从0变成1，我的理解是，物理上来说，是可以实现每一位的，从0变成1的，但是实际上，对于实际的物理实现，出于效率的考虑，如果对于，每一个存储单元都能单独控制，即，0变成1就是，对每一个存储单元单独去充电，所需要的硬件实现就很复杂和昂贵，同时，所进行对块擦除的操作，也就无法实现之前所说的的，Flash的速度，即一闪而过的速度了，也就失去了Flash的众多特性了。

##### MLC（Multi Level Cell）

与SLC相对应的，就是单个存储单元，可以存储多个位，比如2位，4位等。其实现机制，说起来比较简单，就是通过控制内部电荷的多少，分成多个阈值，通过控制里面的电荷多少，而达到我们所需要的存储成不同的数据。比如，假设输入电压是Vin＝4V（实际没有这样的电压，此处只是为了举例方便），那么，可以设计出2的2次方＝4个阈值， 1/4  的Vin＝1V，2/4的Vin＝2V，3/4的Vin＝3V，Vin＝4V，分别表示2位数据00，01，10，11，对于写入数据，就是充电，通过控制内部的电荷的多少，对应表示不同的数据。

对于读取，则是通过对应的内部的电流（与Vth成反比），然后通过一系列解码电路完成读取，解析出所存储的数据。这些具体的物理实现，都是有足够精确的设备和技术，才能实现精确的数据写入和读出的。

单个存储单元可以存储2位数据的，称作2的2次方＝4 Level Cell，而不是2 Level Cell，关于这点，之前看Nand flash的数据手册（datasheet）的时候，差点搞晕了。

同理，对于新出的单个存储单元可以存储4位数据的，称作 2的4次方＝16 Level Cell。

#### 数据存储单元的整体架构

大到小来说，就是：

*Nand Flash ⇒ Chip ⇒ Plane ⇒ Block ⇒ Page ⇒ oob*

![Nand Flash的结构图](图片/RAM|ROM|FLASH/nand_flash_layout.png)

#####  Block块

一个Nand Flash（的chip，芯片）由很多个块（Block）组成，块的大小一般是128KB，256KB，512KB，此处是128KB。其他的小于128KB的，比如64KB，一般都是下面将要介绍到的small block的Nand Flash。

*块Block，是Nand Flash的擦除操作的基本/最小单位。*

##### Page页

每个块里面又包含了很多页（page）。每个页的大小，对于现在常见的Nand Flash多数是2KB，最新的Nand  Flash的是4KB、8KB等，这类的页大小大于2KB的Nand Flash，被称作big block的Nand  Flash，对应的发读写命令地址，一共5个周期(cycle)，而老的Nand Flash，页大小是256B，512B，这类的Nand  Flash被称作small block，地址周期只有4个。

*页Page，是读写操作的基本单位。*

不过，也有例外的是，有些Nand Flash支持subpage（1/2页或1/4页）子页的读写操作，不过一般很少见。

#### oob / Redundant Area / Spare Area

每一个页，对应还有一块区域，叫做空闲区域（spare area）/冗余区域（redundant  area），而Linux系统中，一般叫做OOB（Out Of Band），这个区域，是最初基于Nand  Flash的硬件特性：数据在读写时候相对容易错误，所以为了保证数据的正确性，必须要有对应的检测和纠错机制，此机制被叫做EDC(Error  Detection Code)/ECC（Error Code Correction, 或者 Error Checking and  Correcting），所以设计了多余的区域，用于放置数据的校验值。

Oob的读写操作，一般是随着页的操作一起完成的，即读写页的时候，对应地就读写了oob。

关于oob具体用途，总结起来有： 

标记是否是坏快
存储ECC数据
存储一些和文件系统相关的数据。如jffs2就会用到这些空间存储一些特定信息，而yaffs2文件系统，会在oob中，存放很多和自己文件系统相关的信息。

## 三、对比

NAND  Flash没有采取内存的随机读取技术，它的读取是以一次读取一块的形式来进行的，通常是一次读取512个字节，采用这种技术的Flash比较廉价。用户不能直接运行NAND Flash上的代码，因此好多使用NAND Flash的开发板除了使用NAND Flash以外，还作上了一块小的NOR  Flash来运行启动代码。 

一般小容量的用NOR Flash，因为其读取速度快，多用来存储操作系统等重要信息

大容量的用NAND FLASH，最常见的NAND FLASH应用是嵌入式系统采用的DOC（Disk On Chip）和我们通常用的'闪盘'，可以在线擦除。

### 1、存储区别

NOR的特点是芯片内执行(XIP, execute In Place)，这样应用程序可以接在flash闪存内运行，不必再把代码读到系统RAM中。

NOR的传输效率很高，在1～4MB的小容量时具有很高的成本效益，但是很低的写入和擦除速度大大影响了它的性能。

NAND结构能提供极高的单元密度，可以达到高存储密度，并且写入和擦除的速度也很快。应用NAND的困难在于flash的管理和需要特殊的系统接口。

### 2、性能

flash闪存是非易失存储器，可以对称为块的存储器单元块进行擦写和再编程。任何flash器件的写入操作只能在空或已擦除的单元内进行，所以大多数情况下，在进行写入操作之前必须先执行擦除。NAND器件执行擦除操作是十分简单的，而NOR则要求在进行擦除前先要将目标块内所有的位都写为0。

由于擦除NOR器件时是以64～128KB的块进行的，执行一个写入/擦除操作的时间为5s，与此相反，擦除NAND器件是以8～32KB的块进行的，执行相同的操作最多只需要4ms。
    
执行擦除时块尺寸的不同进一步拉大了NOR和NADN之间的性能差距，统计表明，对于给定的一套写入操作(尤其是更新小文件时更多的擦除操作必须在基于NOR的单元中进行。这样，当选择存储解决方案时，设计师必须权衡以下的各项因素。

NOR的读速度比NAND稍快一些。
NAND的写入速度比NOR快很多。
NAND的4ms擦除速度远比NOR的5s快。
大多数写入操作需要先进行擦除操作。
NAND的擦除单元更小，相应的擦除电路更少。

### 3、接口差别

NOR flash带有SRAM接口，有足够的地址引脚来寻址，可以很容易地存取其内部的每一个字节。

NAND器件使用复杂的I/O口来串行地存取数据，各个产品或厂商的方法可能各不相同。8个引脚用来传送控制、地址和数据信息。

NAND读和写操作采用512字节的块，这一点有点像硬盘管理此类操作，很自然地，基于NAND的存储器就可以取代硬盘或其他块设备。

### 4、应用

NOR flash占据了容量为1～16MB闪存市场的大部分

NAND flash只是用在8～128MB的产品当中，这也说明NOR主要应用在代码存储介质中，NAND适合于数据存储，



# 参考

[内存(RAM或ROM)和FLASH存储的真正区别总结](https://www.cnblogs.com/biglucky/p/8074615.html)

[ROM](https://baike.baidu.com/item/%E5%8F%AA%E8%AF%BB%E5%AD%98%E5%82%A8%E5%99%A8/2399075?fromtitle=ROM&fromid=12424911)

[随机存取存储器](https://baike.baidu.com/item/%E9%9A%8F%E6%9C%BA%E5%AD%98%E5%8F%96%E5%AD%98%E5%82%A8%E5%99%A8/4099402)

[flash](https://baike.baidu.com/item/Flash/5797776#viewPageContent)

[分析DRAM、NAND FLASH、NOR FLASH三大存储器](https://blog.csdn.net/qq_41394155/article/details/84667169?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522162493510816780261993739%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&request_id=162493510816780261993739&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_v2~rank_v29-10-84667169.pc_search_result_cache&utm_term=nor%E5%92%8Cnand+flash%E7%9A%84%E7%94%A8%E9%80%94&spm=1018.2226.3001.4187)

[flash详解-内容多，啥都有](https://blog.csdn.net/sternlycore/article/details/90778144?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522162493429816780269826668%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&request_id=162493429816780269826668&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_v2~rank_v29-1-90778144.pc_search_result_cache&utm_term=flash&spm=1018.2226.3001.4187)









































































